\documentclass[11pt, twoside]{article}
\usepackage[a4paper, total={6in, 8in}]{geometry}
\usepackage[T1]{fontenc}

% Essential packages
\usepackage[english,danish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{todonotes}
\usepackage{textcomp}
\usepackage[skins,minted,breakable]{tcolorbox}
\usepackage{booktabs}

% Math packages
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage{pgfplots}
\usepackage{pgfplotstable}

% Programming packages
\usepackage{listings,newtxtt}
\usepackage[ruled,vlined,linesnumbered]{algorithm2e}
\usepackage{courier}

% Layout packages
\usepackage{csquotes}
\usepackage{booktabs}
\usepackage{multicol}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{lipsum}
\usepackage{subcaption}
\usepackage[hidelinks]{hyperref}
\usepackage[capitalise]{cleveref}
\usepackage[style=numeric-comp,maxbibnames=99,backend=bibtex]{biblatex}
\usepackage[hyphenbreaks]{breakurl}
\usepackage[htt]{hyphenat}
\usepackage{array}
\usepackage{colortbl}

\usepgfplotslibrary{groupplots}
\usepgfplotslibrary[groupplots]
\usetikzlibrary{pgfplots.groupplots}
\usetikzlibrary[pgfplots.groupplots]

% Bibliography settings
\addbibresource{bibliography.bib}
\addbibresource{iacr.bib}
\setlength{\columnsep}{4cm} %adjust base on your name length

% My commands and environments

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\definecolor{mintedbackground}{rgb}{0.95,0.95,0.95}
\definecolor{mintedframe}{rgb}{0.70,0.85,0.95}

\newcommand{\mpar}{\medskip\par}
\theoremstyle{plain}% default
\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem*{cor}{Corollary}

\theoremstyle{definition}
\newtheorem{defn}{Definition}

\newenvironment{alg}{
        \begin{algorithm}[H]
            \DontPrintSemicolon
            \SetAlgoLined
    }{
        \end{algorithm}
    }

\newcommand{\eff}{\mathbb{F}} % Fancy F
\newcommand{\pp}{\texttt{++}} % ++ operator
\newcommand{\rightshift}{\texttt{ >> }} 
\newcommand{\td}[1]{\todo[inline]{#1}} % Todo notes

\newtcbinputlisting[auto counter,number within=section]{\pylisting}[4][]{
    listing file={../#2},
    enhanced,
    breakable,
    #1,
    title=(Listing \thetcbcounter) \detokenize{#2}, 
    minted options={firstline=#3,lastline=#4,autogobble},
    listing engine=minted, 
    listing only,
    minted language=python, 
    coltitle=mintedbackground!0!black, 
    fonttitle=\ttfamily\footnotesize,
    sharp corners,
    label type=listing,
    after={\par\vspace{\baselineskip}\noindent},
    top=0mm, 
    bottom=0mm,
    title code={
        \path[draw=mintedframe,dashed, fill=mintedbackground](title.south west)--(title.south east);
    },
    frame code={
        \path[draw=mintedframe, fill=mintedbackground](frame.south west) rectangle (frame.north east);
    }
}

\newtcbinputlisting[use counter from=pylisting,number within=section]{\clisting}[4][]{
    listing file={../#2},
    enhanced,
    breakable,
    #1,
    title=(Listing \thetcbcounter) \detokenize{#2}, 
    minted options={firstline=#3,lastline=#4,autogobble},
    listing engine=minted, 
    listing only,
    minted language=c, 
    coltitle=mintedbackground!0!black, 
    fonttitle=\ttfamily\footnotesize,
    sharp corners,
    label type=listing,
    after={\par\vspace{\baselineskip}\noindent},
    top=0mm, 
    bottom=0mm,
    title code={
        \path[draw=mintedframe,dashed, fill=mintedbackground](title.south west)--(title.south east);
    },
    frame code={
        \path[draw=mintedframe, fill=mintedbackground](frame.south west) rectangle (frame.north east);
    }
}

\newcommand{\srcref}[1]{\hyperref[#1]{Line~\ref*{#1}}}

% \newcommand{\pylisting}{\begingroup
%   \catcode`_=12 \dopylisting}

% Layout
\addtolength{\topmargin}{-13.2842pt}
\setlength{\headheight}{25.2842pt}
\fancyhf[HLO]{Mikkel Juul Vestergaard\\IMADA, SDU}
\fancyhf[HRO]{\leftmark}
\fancyhf[HLE]{}
\fancyhf[HRE]{\rightmark}

\SetArgSty{textnormal} % Set text style for guard in algorithms

\setminted{
    fontfamily=tt,
    linenos=true,
    numberblanklines=true,
    numbersep=12pt,
    numbersep=2pt,
    frame=leftline,
    framesep=2mm,
    funcnamehighlighting=true,
    tabsize=4,
    obeytabs=false,
    mathescape=false
    samepage=false,
    showspaces=false,
    showtabs =false,
    texcl=false,
    baselinestretch=1.2,
    fontsize=\footnotesize,
    breaklines=true,
    autogobble=true,
    escapeinside=\%\%,
}

\pgfplotstableset{
  my multistyler/.style 2 args={
    @my multistyler/.style={display columns/##1/.append style={#2}},
    @my multistyler/.list={#1}
  }
}

% Feedback
\usepackage{ifthen}
\usepackage[normalem]{ulem}
\newcommand{\phrase}[2][]{\textcolor{blue}{\textbf{\ifthenelse{\equal{#1}{}}{}{(#1)}} \uline{#2}}} % needs rephrase
\renewcommand{\comment}[1]{\textcolor{red}{\textbf{(#1)}}}

\pgfplotsset{width=5cm,compat=1.9} 

\begin{document}

\pagenumbering{gobble}
\input{cover}
\newpage

%\pagenumbering{arabic}
% \newpage

\selectlanguage{danish}
\begin{abstract}
    \lipsum[1]
\end{abstract}
% \newpage
% \
\newpage
\selectlanguage{english}

\tableofcontents
% \listoftables NECESSARY?
% \listoffigures NECESSARY?
\newpage
\pagenumbering{arabic}
\pagestyle{fancy}

\td{ADD CODE LISTINGS}
% Core contents
\input{chapters/1_introduction}
\input{chapters/2_Prerequisites.tex}
\input{chapters/3_Dinur.tex}
\input{chapters/4_Extensions.tex}
\input{chapters/5_Implementation.tex}
\input{chapters/6_Evaluation.tex}
\input{chapters/7_Conclusion.tex}

% Bibliography
\newpage
\printbibliography

% Appendix
\appendix 
\input{chapters/appendix}

\end{document}
